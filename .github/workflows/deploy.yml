name: Build/deployon:  workflow_dispatch:  push:env:  AWS_ACCOUNT_ID_DEV: 544312030237  AWS_ACCOUNT_ID_PROD: 635800996936permissions:  actions: read  checks: read  contents: read  deployments: read  id-token: write  issues: read  packages: read  pull-requests: read  repository-projects: read  security-events: read  statuses: readjobs:  lint-test-build:    name: ðŸ“‹ Lint, Test and Build Website    runs-on: ubuntu-latest    steps:      - uses: actions/checkout@v3      - uses: actions/setup-node@v3.6.0        with:          node-version: 18      - run: deployment/scripts/lint_test_build.sh      - uses: actions/upload-artifact@v3        with:          name: build.zip          path: build.zip      - uses: actions/cache@v3        with:          path: |            ~/.npm            ${{ github.workspace }}/.next/cache          # Generate a new cache whenever packages or source files change.          key: ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}-${{ hashFiles('**.[jt]s', '**.[jt]sx') }}          # If source files changed but packages didn't, rebuild from a prior cache.          restore-keys: |            ${{ runner.os }}-nextjs-${{ hashFiles('**/package-lock.json') }}-  deploy-to-dev:    name: ðŸ›¶  Deploy to dev    needs:      - lint-test-build    runs-on: ubuntu-latest    if: ${{ github.event_name == 'workflow_dispatch' || (github.event_name == 'push' && github.event.ref == 'refs/heads/main') }}    steps:        - uses: actions/checkout@v3        - uses: actions/setup-node@v3.6.0          with:            node-version: 18        - uses: actions/download-artifact@v3          with:            name: build.zip            path: deployment        - uses: aws-actions/configure-aws-credentials@v2          with:            role-to-assume: arn:aws:iam::${{ env.AWS_ACCOUNT_ID_DEV }}:role/infra-service-deployment            role-session-name: web-app-deploy-role            aws-region: eu-west-2        - run: deployment/scripts/deploy_dev.sh  deploy-to-prod:    name: ðŸš¢ Deploy to prod    needs:      - lint-test-build    runs-on: ubuntu-latest    if: ${{ github.event_name == 'workflow_dispatch' || (github.event_name == 'push' && github.event.ref == 'refs/heads/main') }}    steps:      - uses: actions/checkout@v3      - uses: actions/setup-node@v3.6.0        with:          node-version: 18      - uses: actions/download-artifact@v3        with:          name: build.zip          path: deployment      - uses: aws-actions/configure-aws-credentials@v2        with:          role-to-assume: arn:aws:iam::${{ env.AWS_ACCOUNT_ID_PROD }}:role/infra-service-deployment          role-session-name: web-app-deploy-role          aws-region: eu-west-2      - run: deployment/scripts/deploy_prod.sh